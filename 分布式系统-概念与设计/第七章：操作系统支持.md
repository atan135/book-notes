本章的目标是讨论某种操作系统机制对中间件提供分布式资源能力的影响。内核与运行在其上的客户和服务器进程是我们所关心的主要的体系结构组件。内核和服务器进程作用域管理资源和为客户提供资源接口，因此，它们需要具备以下特点：

* **封装：** 它们应该提供有用的能够访问资源的服务接口。
* **保护：** 资源需要被保护以放置非法访问。
* **并发处理：** 客户可以共享资源并能并发的访问它们，资源管理器负责实现并发透明性。

**核心操作系统组件和它们的责任是：**

* **进程管理器：** 负责进程的创建，进程包括一个地址空间和一个或多个线程，是资源管理单元。
* **线程管理器：** 负责线程创建、同步和调度。线程是与进程相关的调度活动。
* **通信管理器：** 负责同一台机器上不同进程中线程之间的通信。一些内核也支持远程进程的线程之间通信。
* **内存管理器：** 负责管理物理内存和虚拟内存。
* **底层管理器：** 负责处理中断、系统调用陷阱和其他异常，同时控制内存管理单元和硬件缓存以及处理器和浮点寄存器操作，在windows中，这被称为硬件抽象层。

### 内存对进程访问权限控制的细节

1. 内核在系统初始化适合就一直保持着运行并且对其主机的物理资源有完全的访问权限。特别是，它可以控制内存管理单元并设置处理器的寄存器，这就使得没有其他代码能够访问机器的物理资源，除了以内核允许的方式。
2. 大多数处理器有硬件模式的寄存器，它们的设置决定了特权指令能否被执行，例如有些指令决定内存管理单元当前采用哪一个保护表。内核进程在处理器的管理（特权）模式下执行，而内核安排其他进程在用户（非特权）模式下进行。
3. 内核通过建立地址空间来保护自己和其他进程以放置异常进程的访问。