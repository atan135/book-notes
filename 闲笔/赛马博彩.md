## 神魔圣域的赛马游戏下注问题

#### 题目：

神魔圣域的一个小游戏，通过分析不同队伍赛马的状态，给出不同的赔率。玩家对自己看好的马队下注，获得金币，如图。

![](http://cdn.zergzerg.cn/2019-01-18xianbi_1.png)

游戏中允许多次下注，通过什么策略可以保证自己稳赢不赔？

#### 解答

其实，是一个线性规划的题目，四支队伍，拥有不同的赔率，可以通过线性组合，分析得出最佳的下注比例，保证下注后的稳定收益。

假设总金额投入为100，那么分配给四支队伍的金额分别为：
$$
x_1 + x_2 + x_3 + x_4 = 100
$$
而收益的最差情况为：
$$
Sum_{x_1,x_2,x_3,x_4} = \min(8.4 \times x_1, 10.9 \times x_2, 3.1 \times x_3, 3.0 \times x_4)
$$
通过遍历所有组合：
$$
BestMatch = \max(Sum_{x_1,x_2,x_3,x_4}) \\
for\quad x_1 \in [0,100], x_2 \in [0,100-i], x_3 \in [0,100-i-j], x_4 = 100-i-j-k
$$


#### 代码

```python
maxnum = 0
x1 = 0
x2 = 0
x3 = 0
x4 = 0
for i in range(0,101):
    for j in range(0, 101-i):
        for k in range(0, 101-i-j):
            d = 100 - i - j - k;
            minnum = 10000;
            if i * 8.4 < minnum:
                minnum = i * 8.4
            if j * 10.9 < minnum:
                minnum = j * 10.9
            if k * 3.1 < minnum:
                minnum = k * 3.1
            if d * 3.0 < minnum:
                minnum = d * 3.0
            if minnum > maxnum:
                maxnum = minnum
                x1 = i
                x2 = j
                x3 = k
                x4 = d

print(x1,x2,x3,x4,maxnum);

```

输出最佳条件为：(14, 11, 37, 38, 114.0)，即使用这一组合[14, 11, 37, 38]下注，可以保证无论哪支队伍获胜，自己能获得的稳定收益最高。

注意：

python中的range的取值范围为：rang(a,b) 为[a,b)左闭右开区间

#### 一些想法

​	这个解法算是最简单的暴力破解了，算法的复杂度是 $$O(N^k)$$ ，其中，N是选择范围，上例为100，k是队伍数量，上图是4，如果是类似足球比赛32支球队，不同赔率这样算，算法的计算量就会很庞大了，数量级是 $$100^{32}$$, 有一种随机化算法，可以取得一定程度的局部最优解，但是不能保证是全局最优解的方式。方法是随机取序列，然后向周围局部遍历，取得局部最优值，最终经过多次选取，从其中选择最优解为全局随机最优解。

